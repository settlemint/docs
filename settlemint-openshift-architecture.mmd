flowchart TB
 subgraph external["External Traffic"]
    direction LR
        ExtUser["External Users"]
        ThirdParty["Third-Party APIs"]
  end
 subgraph openshift["OpenShift Platform Services<br>(Pre-existing - Requires Configuration)"]
    direction TB
        OpenShiftRouter["OpenShift Router<br>Ingress Controller"]
        OpenShiftDNS["DNS Management"]
        OpenShiftCerts["Certificate Manager<br>SSL/TLS"]
        OpenShiftLB["Load Balancer"]
        OpenShiftMonitoring["OpenShift Monitoring<br>[OPTIONAL]"]
        OpenShiftStorage["OpenShift Container Storage<br>[OPTIONAL]"]
  end
 subgraph platform["Platform Core Services"]
    direction TB
        IngressNginx["SettleMint Ingress NGINX<br><b>[REQUIRED]</b><br>Traffic Routing"]
        App["Application Frontend<br><b>[REQUIRED]</b>"]
        API["API Service<br><b>[REQUIRED]</b>"]
        Job["Job Workers<br><b>[REQUIRED]</b>"]
        DeployWorker["Deploy Worker<br><b>[REQUIRED]</b>"]
        Singleton["Singleton<br><b>[REQUIRED]</b>"]
        Docs["Documentation<br>[OPTIONAL]"]
  end
 subgraph helm["SettleMint Helm Chart Deployment<br>(Installed by Helm Chart)"]
    direction TB
        platform
  end
 subgraph databases["Databases & Cache"]
        PostgreSQL["PostgreSQL<br><b>[REQUIRED]</b>"]
        Redis["Redis<br><b>[REQUIRED]</b>"]
  end
 subgraph security["Security & Storage"]
        Vault["Secret Manager<br><b>[REQUIRED]</b>"]
        Storage["S3-Compatible Storage<br><b>[REQUIRED]</b>"]
        OAuth["OAuth Provider<br><b>[REQUIRED]</b>"]
  end
 subgraph monitoring["Observability"]
        CustomObservability["Custom Observability<br>(Prometheus/Grafana)<br>[IF NOT USING OPENSHIFT]"]
  end
 subgraph prerequisites["Required Prerequisites<br>(Must Deploy Separately)"]
    direction TB
        databases
        security
        monitoring
  end
 subgraph deployments["Blockchain Services<br>(Deployed by Platform)"]
    direction TB
        BesuNode["Besu Nodes"]
        Subgraphs["Subgraphs"]
        CustomServices["Custom Deployments"]
  end
 subgraph legend["Legend"]
    direction TB
        L1["ðŸ”´ Red = OpenShift Platform Services"]
        L2["ðŸŸ¢ Green = SettleMint Helm Chart"]
        L3["ðŸŸ¡ Yellow = Required Prerequisites"]
        L4["ðŸŸ£ Purple = Blockchain Deployments"]
        L5["Solid Border = Required"]
        L6["Dashed Border = Optional"]
        L7["== Thick Arrow == Main Traffic"]
  end
    ExtUser --> OpenShiftLB
    ThirdParty --> OpenShiftLB
    OpenShiftLB --> OpenShiftRouter
    OpenShiftDNS -.-> OpenShiftRouter
    OpenShiftCerts -.-> OpenShiftRouter
    OpenShiftRouter ==> IngressNginx
    IngressNginx == Traffic ==> App & API
    IngressNginx -.-> BesuNode & Subgraphs
    App --> API & OAuth
    API --> Job & PostgreSQL & Redis & Vault & Storage & DeployWorker & Singleton
    DeployWorker --> Storage & Vault
    Singleton --> Storage
    Job --> PostgreSQL & Redis
    DeployWorker ==> BesuNode & Subgraphs & CustomServices
    API -. Optional .-> OpenShiftMonitoring & CustomObservability
    BesuNode -.-> OpenShiftMonitoring & CustomObservability
    Subgraphs -.-> OpenShiftMonitoring & CustomObservability
    OpenShiftStorage -. Can Replace .-> Storage

     ExtUser:::externalStyle
     ThirdParty:::externalStyle
     OpenShiftRouter:::openshiftStyle
     OpenShiftDNS:::openshiftStyle
     OpenShiftCerts:::openshiftStyle
     OpenShiftLB:::openshiftStyle
     OpenShiftMonitoring:::openshiftOptionalStyle
     OpenShiftStorage:::openshiftOptionalStyle
     IngressNginx:::helmStyle
     App:::helmStyle
     API:::helmStyle
     Job:::helmStyle
     DeployWorker:::helmStyle
     Singleton:::helmStyle
     Docs:::helmOptionalStyle
     PostgreSQL:::prereqStyle
     Redis:::prereqStyle
     Vault:::prereqStyle
     Storage:::prereqStyle
     OAuth:::prereqStyle
     CustomObservability:::prereqOptionalStyle
     BesuNode:::deploymentStyle
     Subgraphs:::deploymentStyle
     CustomServices:::deploymentStyle
     L1:::legendStyle
     L2:::legendStyle
     L3:::legendStyle
     L4:::legendStyle
     L5:::legendStyle
     L6:::legendStyle
     L7:::legendStyle
    classDef externalStyle fill:#e1f5ff,stroke:#0077b6,stroke-width:2px,color:#000
    classDef openshiftStyle fill:#ee0000,stroke:#a30000,stroke-width:3px,color:#fff
    classDef openshiftOptionalStyle fill:#ee0000,stroke:#a30000,stroke-width:2px,color:#fff,stroke-dasharray: 5 5
    classDef helmStyle fill:#d4f1d4,stroke:#2d6a4f,stroke-width:3px,color:#000
    classDef helmOptionalStyle fill:#d4f1d4,stroke:#2d6a4f,stroke-width:2px,color:#000,stroke-dasharray: 5 5
    classDef prereqStyle fill:#fff3cd,stroke:#f4a261,stroke-width:3px,color:#000
    classDef prereqOptionalStyle fill:#fff3cd,stroke:#f4a261,stroke-width:2px,color:#000,stroke-dasharray: 5 5
    classDef deploymentStyle fill:#e8d7ff,stroke:#7209b7,stroke-width:2px,color:#000
    classDef legendStyle fill:#f8f9fa,stroke:#6c757d,stroke-width:1px,color:#000
    classDef noteStyle fill:#fff9e6,stroke:#997a00,stroke-width:2px,color:#000,font-size:12px


