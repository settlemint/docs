---
title: "Atomic Exchange"
description: Enable atomic asset exchanges between parties with XvP Settlement
---

import { Callout } from "fumadocs-ui/components/callout";

## SettleMint XvP Settlement

The XvP (Anything-versus-Payment) Settlement module enables atomic, trustless
exchanges of digital assets between parties. This feature provides a secure
mechanism for executing delivery-versus-payment (DvP), payment-versus-payment
(PvP), or any asset-versus-asset exchange in a single, indivisible transaction.

## What is XvP Settlement?

XvP Settlement is a smart contract-based solution that ensures all parties in a
transaction either receive their expected assets simultaneously or the
transaction does not execute at all. This eliminates counterparty risk and
settlement failures common in traditional exchanges.

### Key benefits

- **Atomic execution**: All transfers succeed or fail together, eliminating
  partial settlement risk
- **Trustless operation**: No need for intermediaries or escrow services
- **Programmable settlement**: Configure expiration dates and auto-execution
  parameters
- **Multi-party capability**: Support for complex settlement flows involving
  multiple assets and participants

## Creating an XvP Settlement

To create a new XvP Settlement, navigate to the XvP Settlement section and click
"Create New Settlement." The creation interface allows you to configure:

1. **Settlement party**: The counterparty wallet address for the exchange
2. **Assets**: Select the assets and amounts you wish to exchange
3. **Expiry date**: The date after which the settlement cannot be executed
4. **Auto-execute**: Toggle to automatically execute the settlement upon final
   approval

<Callout type="info">
  While the underlying smart contract supports complex multi-party flows, the
  current UI implements a simplified version allowing for exchanges between two
  parties.
</Callout>

Once configured, submit the transaction to deploy a new XvP Settlement contract.
The newly created settlement will appear in your settlement list for monitoring.

## Approving an XvP Settlement

When you're involved in an XvP Settlement (either as initiator or counterparty),
you'll need to approve it before execution. The approval process includes:

1. **Review settlement details**: Verify the assets, amounts, and expiry date
2. **Grant asset allowances**: Approve the settlement contract to transfer your
   assets
3. **Submit approval**: Confirm your participation in the settlement

When you approve a settlement, two transactions occur:

- First, you grant the XvP contract allowance to transfer the specified assets
  from your wallet
- Second, you mark your approval on the settlement contract itself

Once all involved parties have approved the settlement, it becomes eligible for
execution.

## Executing an XvP Settlement

The execution phase is where the XvP Settlement demonstrates its value. During
execution:

1. The contract verifies all required approvals are in place
2. It checks that the settlement hasn't expired or been cancelled
3. It atomically transfers all assets between parties in a single transaction

If auto-execution is enabled during creation, the settlement will automatically
execute when the final party approves it. In this case, the last approver pays
the gas fees for the execution transaction.

<Callout type="warning">
  If auto-execution is disabled, the settlement requires manual execution after
  approvals. Any wallet can execute by paying the gas fees.
</Callout>

## Cancelling an XvP Settlement

Any involved party can cancel an XvP Settlement before it has been executed.
This provides a safety mechanism if:

- Settlement parameters were incorrectly configured
- Market conditions change before settlement execution
- One party needs to withdraw from the agreement
- The settlement is no longer needed

Once a settlement is cancelled, it cannot be reactivated or executed.

## Settlement states

An XvP Settlement can exist in one of several states:

- **Pending**: Created but not yet fully approved by all parties
- **Ready**: Fully approved and ready for execution
- **Executed**: Successfully completed, with all assets transferred
- **Expired**: Past the cutoff date and no longer executable
- **Cancelled**: Explicitly cancelled by an involved party

These states help track the lifecycle of each settlement and provide clarity on
its current status.

## Technical implementation

The XvP Settlement is powered by a secure smart contract that follows best
practices for atomic exchanges. The contract:

- Utilizes OpenZeppelin's security libraries
- Implements reentrancy protection
- Supports meta-transactions for gasless operations
- Includes comprehensive error handling
- Emits events for all key actions for auditability

Each settlement contract maintains its own state and manages the asset flows
between parties, ensuring settlement integrity and security.
