---
title: Setup API Portal
description: Setup smart contractAPI portal
---

import { Tabs, Tab } from "fumadocs-ui/components/tabs";
import { Callout } from "fumadocs-ui/components/callout";
import { Steps } from "fumadocs-ui/components/steps";
import { Card } from "fumadocs-ui/components/card";

<div style={{
  backgroundColor: "#e1eafd", 
  color: "#356fee", 
  padding: "0.5px 10px 10px 10px",
  borderRadius: "10px", 
  fontSize: "18px", 
  fontWeight: "bold",
  lineHeight: "1.5",
  textAlign: "left"
}}>
  Summary  
  <div style={{ fontSize: "16px", fontWeight: "normal", marginTop: "5px" }}>

To set up the API Portal for a smart contract, you first need to compile the
contract and locate its ABI file. The ABI is auto-generated during compilation
and acts as a translation layer between your contract and external tools like
frontends or API layers. You’ll find this ABI in the
artifacts/contracts/ContractName.sol/ContractName.json file if you used Hardhat,
or under out/ if you used Foundry. This file contains structured definitions of
all contract functions and events, and is essential for enabling external calls
through REST or GraphQL.

Once you have the ABI file, navigate to your application on the SettleMint
platform and go to the Middleware section. Here, you’ll need to add a new
middleware of type API Portal. You will assign a name, select the blockchain
node where your contract is deployed, and upload the ABI file. Make sure the ABI
file is named appropriately because that name will reflect in your API
structure. After confirming the setup, the API portal will automatically expose
both REST and GraphQL endpoints based on your contract’s ABI.

To connect the API portal with your contract logic, you must provide the smart
contract’s deployed address. This can be found inside the
deployed_addresses.json file generated by Ignition after a successful
deployment. The portal will use this address to direct requests to the correct
contract instance.

Once deployed, you can start making REST API calls using standard HTTP requests.
You’ll use the base URL shown under the portal’s Connect tab, and structure your
API requests according to the contract’s ABI. Each call should include
authentication via your Application Access Token, and a JSON payload specifying
the function name, parameters, and caller details such as from, gasLimit, and
simulate. The response will return transaction hashes for writes, or data for
reads.

</div>
</div>

## How to setup API Portal in SettleMint platform

### 1. Understanding Application Binary Interface (ABI)

The Application Binary Interface (ABI) is an essential artifact in Ethereum and
other EVM-based blockchain ecosystems that defines how smart contracts
communicate with the outside world. It acts as a formal agreement between a
deployed smart contract and any external entity—such as web applications,
backend servers, wallets, or command-line tools—about how to encode and decode
data for function calls, returns, and events. The ABI describes, in a structured
JSON format, each function’s name, inputs, outputs, type (e.g., function,
constructor, event), and visibility (view, pure, payable, etc.).

The ABI is generated automatically when a Solidity smart contract is compiled.
When developers write a Solidity contract and run it through the Solidity
compiler (solc), or through development frameworks like Hardhat or Truffle, the
output includes several artifacts, one of which is the ABI. This ABI is derived
by analyzing the contract’s function signatures, input and output types, event
declarations, and constructor. For each function, the compiler calculates a
unique function selector—a 4-byte identifier based on the first 4 bytes of the
keccak256 hash of the function’s signature (e.g., transfer(address,uint256)).
The ABI then maps these selectors to their corresponding human-readable
definitions in JSON form.

At runtime, when an application (like a frontend built with Web3.js or
Ethers.js) wants to interact with the contract, it uses this ABI to encode the
function call and its parameters into hexadecimal data that the Ethereum Virtual
Machine (EVM) can understand. Similarly, when the EVM returns data (e.g., the
result of a view function or an event emitted during a transaction), the ABI
provides the blueprint for decoding this binary data back into usable JavaScript
objects.In addition to function calls, the ABI is also critical for subscribing
to and decoding events emitted by the contract. Each event in the contract is
represented in the ABI with a structure that allows applications to listen for
specific logs on-chain and parse them into structured data.

### 2. Using ABI from the **UserData.sol** smart contract which we deployed in the previous step

Navigate to **/artifacts/contracts/UserData.sol/UserData.json** to find the ABI
of the contract we compiled and deployed in the previous step. Download the JSON
file.

If you build using Foundry, you will find the ABI in the **out** folder
out>ContractName.sol>ContractName.json

![ABI JSON](../../../img/building-with-settlemint/abi-json.png)

The ABI you will get is the following-

```json
{
  "_format": "hh-sol-artifact-1",
  "contractName": "UserData",
  "sourceName": "contracts/UserData.sol",
  "abi": [
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "userId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "name",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "email",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "uint8",
          "name": "age",
          "type": "uint8"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "country",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "bool",
          "name": "isKYCApproved",
          "type": "bool"
        }
      ],
      "name": "ProfileCreated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "userId",
          "type": "uint256"
        }
      ],
      "name": "ProfileDeleted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "userId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "name",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "email",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "uint8",
          "name": "age",
          "type": "uint8"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "country",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "bool",
          "name": "isKYCApproved",
          "type": "bool"
        }
      ],
      "name": "ProfileUpdated",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "userId",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "name",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "email",
          "type": "string"
        },
        {
          "internalType": "uint8",
          "name": "age",
          "type": "uint8"
        },
        {
          "internalType": "string",
          "name": "country",
          "type": "string"
        },
        {
          "internalType": "bool",
          "name": "isKYCApproved",
          "type": "bool"
        }
      ],
      "name": "createProfile",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "userId",
          "type": "uint256"
        }
      ],
      "name": "deleteProfile",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "userId",
          "type": "uint256"
        }
      ],
      "name": "getProfile",
      "outputs": [
        {
          "components": [
            {
              "internalType": "string",
              "name": "name",
              "type": "string"
            },
            {
              "internalType": "string",
              "name": "email",
              "type": "string"
            },
            {
              "internalType": "uint8",
              "name": "age",
              "type": "uint8"
            },
            {
              "internalType": "string",
              "name": "country",
              "type": "string"
            },
            {
              "internalType": "bool",
              "name": "isKYCApproved",
              "type": "bool"
            },
            {
              "internalType": "bool",
              "name": "isDeleted",
              "type": "bool"
            }
          ],
          "internalType": "struct UserData.UserProfile",
          "name": "",
          "type": "tuple"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "profiles",
      "outputs": [
        {
          "internalType": "string",
          "name": "name",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "email",
          "type": "string"
        },
        {
          "internalType": "uint8",
          "name": "age",
          "type": "uint8"
        },
        {
          "internalType": "string",
          "name": "country",
          "type": "string"
        },
        {
          "internalType": "bool",
          "name": "isKYCApproved",
          "type": "bool"
        },
        {
          "internalType": "bool",
          "name": "isDeleted",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "userId",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "name",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "email",
          "type": "string"
        },
        {
          "internalType": "uint8",
          "name": "age",
          "type": "uint8"
        },
        {
          "internalType": "string",
          "name": "country",
          "type": "string"
        },
        {
          "internalType": "bool",
          "name": "isKYCApproved",
          "type": "bool"
        }
      ],
      "name": "updateProfile",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x6080806040523460155761121d908161001b8239f35b600080fdfe6080604052600436101561001257600080fd5b60003560e01c806328279308146109da578063985736ce1461087f578063c36fe3d6146107b5578063eb5339291461023d5763f08f4f641461005357600080fd5b346102385760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261023857600435600060a060405161009581610f12565b6060815260606020820152826040820152606080820152826080820152015280600052600060205260ff60046040600020015460081c166101b45760005260006020526101726040600020604051906100ed82610f12565b6100f6816110a6565b8252610104600182016110a6565b906020830191825261019f60ff60028301541660408501908152600461012c600385016110a6565b936060870194855201549260ff6101856080880196828716151588528260a08a019760081c1615158752604051998a9960208b525160c060208c015260e08b0190611168565b9051601f198a83030160408b0152611168565b925116606087015251601f19868303016080870152611168565b9151151560a084015251151560c08301520390f35b60846040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602560248201527f50726f66696c65206e6f7420666f756e64206f7220686173206265656e20646560448201527f6c657465640000000000000000000000000000000000000000000000000000006064820152fd5b600080fd5b346102385761024b36610fa8565b908560009695939652600060205260ff60046040600020015460081c168015610797575b15610739576040519561028187610f12565b83875260208701858152604088019060ff831682526060890198848a526080810192861515845260a0820192600084528a60005260006020526040600020925180519067ffffffffffffffff82116105885781906102df8654611053565b601f81116106e6575b50602090601f831160011461068357600092610678575b50506000198260011b9260031b1c19161783555b518051600184019167ffffffffffffffff82116105885781906103368454611053565b601f8111610625575b50602090601f83116001146105c2576000926105b7575b50506000198260011b9260031b1c19161790555b60ff600283019151167fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00825416179055600381019951998a5167ffffffffffffffff8111610588576103bc8254611053565b601f8111610540575b5060209b601f82116001146104a8579261048c9492826004937fca34bc1ece01e1f6e787e2fcbd4c56766978c283996ee9eb1055109936cf34259e9f6104989c9b9a999760009261049d575b50506000198260011b9260031b1c19161790555b019151151560ff7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0084541691161782555115157fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00ff61ff00835492151560081b169116179055565b604051958695866111a9565b0390a2005b015190503880610411565b9b601f1982169c83600052816000209d60005b8181106105285750837fca34bc1ece01e1f6e787e2fcbd4c56766978c283996ee9eb1055109936cf34259e9f6104989c9b9a99979461048c9997946004976001951061050f575b505050811b019055610425565b015160001960f88460031b161c19169055388080610502565b929e8f83015181556001019e602001926020016104bb565b826000526020600020601f830160051c8101916020841061057e575b601f0160051c01905b81811061057257506103c5565b60008155600101610565565b909150819061055c565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b015190508e80610356565b600085815282812093601f1916905b81811061060d57509084600195949392106105f4575b505050811b01905561036a565b015160001960f88460031b161c191690558e80806105e7565b929360206001819287860151815501950193016105d1565b909150836000526020600020601f840160051c8101916020851061066e575b90601f859493920160051c01905b81811061065f575061033f565b60008155849350600101610652565b9091508190610644565b015190508e806102ff565b600087815282812093601f1916905b8181106106ce57509084600195949392106106b5575b505050811b018355610313565b015160001960f88460031b161c191690558e80806106a8565b92936020600181928786015181550195019301610692565b909150856000526020600020601f840160051c8101916020851061072f575b90601f859493920160051c01905b81811061072057506102e8565b60008155849350600101610713565b9091508190610705565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601660248201527f50726f66696c6520616c726561647920657869737473000000000000000000006044820152fd5b508460005260006020526107af604060002054611053565b1561026f565b346102385760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126102385760043560005260006020526108446040600020610800816110a6565b9060ff610865610812600184016110a6565b928260028201541690610852600461082c600384016110a6565b9201549560405198899860c08a5260c08a0190611168565b9088820360208a0152611168565b9160408701528582036060870152611168565b918181161515608085015260081c16151560a08301520390f35b346102385760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610238576004358060005260006020526108c8604060002054611053565b1515806109bb575b156109375780600052600060205260046040600020016101007fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00ff8254161790557fcf16d2861dfd91df4afddf545e94c3366dabf9ad0655914d7eaaa978600fb9f4600080a2005b60846040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602860248201527f50726f66696c6520616c72656164792064656c65746564206f7220646f65736e60448201527f27742065786973740000000000000000000000000000000000000000000000006064820152fd5b5080600052600060205260ff60046040600020015460081c16156108d0565b34610238576109e836610fa8565b9085600096959396526000602052610a04604060002054611053565b151580610ef3575b15610e6f5760405195610a1e87610f12565b83875260208701858152604088019060ff831682526060890198848a526080810192861515845260a0820192600084528a60005260006020526040600020925180519067ffffffffffffffff8211610588578190610a7c8654611053565b601f8111610e1c575b50602090601f8311600114610db957600092610dae575b50506000198260011b9260031b1c19161783555b518051600184019167ffffffffffffffff8211610588578190610ad38454611053565b601f8111610d5b575b50602090601f8311600114610cf857600092610ced575b50506000198260011b9260031b1c19161790555b60ff600283019151167fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00825416179055600381019951998a5167ffffffffffffffff811161058857610b598254611053565b601f8111610ca5575b5060209b601f8211600114610c27579261048c9492826004937fd330fcb9953d1c5cd0cb179e5de4b7ce936bb9c68efc7b5b74ff9349fabca6bf9e9f6104989c9b9a999760009261049d5750506000198260011b9260031b1c1916179055019151151560ff7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0084541691161782555115157fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00ff61ff00835492151560081b169116179055565b9b601f1982169c83600052816000209d60005b818110610c8d5750837fd330fcb9953d1c5cd0cb179e5de4b7ce936bb9c68efc7b5b74ff9349fabca6bf9e9f6104989c9b9a99979461048c9997946004976001951061050f57505050811b019055610425565b929e8f83015181556001019e60200192602001610c3a565b826000526020600020601f830160051c81019160208410610ce3575b601f0160051c01905b818110610cd75750610b62565b60008155600101610cca565b9091508190610cc1565b015190508e80610af3565b600085815282812093601f1916905b818110610d435750908460019594939210610d2a575b505050811b019055610b07565b015160001960f88460031b161c191690558e8080610d1d565b92936020600181928786015181550195019301610d07565b909150836000526020600020601f840160051c81019160208510610da4575b90601f859493920160051c01905b818110610d955750610adc565b60008155849350600101610d88565b9091508190610d7a565b015190508e80610a9c565b600087815282812093601f1916905b818110610e045750908460019594939210610deb575b505050811b018355610ab0565b015160001960f88460031b161c191690558e8080610dde565b92936020600181928786015181550195019301610dc8565b909150856000526020600020601f840160051c81019160208510610e65575b90601f859493920160051c01905b818110610e565750610a85565b60008155849350600101610e49565b9091508190610e3b565b60846040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602a60248201527f50726f66696c6520646f6573206e6f74206578697374206f722068617320626560448201527f656e2064656c65746564000000000000000000000000000000000000000000006064820152fd5b5084600052600060205260ff60046040600020015460081c1615610a0c565b60c0810190811067ffffffffffffffff82111761058857604052565b90601f601f19910116810190811067ffffffffffffffff82111761058857604052565b81601f820112156102385780359067ffffffffffffffff82116105885760405192610f866020601f19601f8601160185610f2e565b8284526020838301011161023857816000926020809301838601378301015290565b60c07ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc820112610238576004359160243567ffffffffffffffff81116102385782610ff591600401610f51565b9160443567ffffffffffffffff8111610238578161101591600401610f51565b9160643560ff8116810361023857916084359067ffffffffffffffff82116102385761104391600401610f51565b9060a43580151581036102385790565b90600182811c9216801561109c575b602083101461106d57565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b91607f1691611062565b90604051918260008254926110ba84611053565b808452936001811690811561112857506001146110e1575b506110df92500383610f2e565b565b90506000929192526020600020906000915b81831061110c5750509060206110df92820101386110d2565b60209193508060019154838589010152019101909184926110f3565b602093506110df9592507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0091501682840152151560051b820101386110d2565b919082519283825260005b848110611194575050601f19601f8460006020809697860101520116010190565b80602080928401015182828601015201611173565b9360ff6111cb6111df94610844608097959a999a60a08a5260a08a0190611168565b921660408601528482036060860152611168565b93151591015256fea2646970667358221220e734baef00a48587a6925ab9e9c2ba63acf5e71a194aeb1359347e94b1f78f8a64736f6c634300081b0033",
  "deployedBytecode": "0x6080604052600436101561001257600080fd5b60003560e01c806328279308146109da578063985736ce1461087f578063c36fe3d6146107b5578063eb5339291461023d5763f08f4f641461005357600080fd5b346102385760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261023857600435600060a060405161009581610f12565b6060815260606020820152826040820152606080820152826080820152015280600052600060205260ff60046040600020015460081c166101b45760005260006020526101726040600020604051906100ed82610f12565b6100f6816110a6565b8252610104600182016110a6565b906020830191825261019f60ff60028301541660408501908152600461012c600385016110a6565b936060870194855201549260ff6101856080880196828716151588528260a08a019760081c1615158752604051998a9960208b525160c060208c015260e08b0190611168565b9051601f198a83030160408b0152611168565b925116606087015251601f19868303016080870152611168565b9151151560a084015251151560c08301520390f35b60846040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602560248201527f50726f66696c65206e6f7420666f756e64206f7220686173206265656e20646560448201527f6c657465640000000000000000000000000000000000000000000000000000006064820152fd5b600080fd5b346102385761024b36610fa8565b908560009695939652600060205260ff60046040600020015460081c168015610797575b15610739576040519561028187610f12565b83875260208701858152604088019060ff831682526060890198848a526080810192861515845260a0820192600084528a60005260006020526040600020925180519067ffffffffffffffff82116105885781906102df8654611053565b601f81116106e6575b50602090601f831160011461068357600092610678575b50506000198260011b9260031b1c19161783555b518051600184019167ffffffffffffffff82116105885781906103368454611053565b601f8111610625575b50602090601f83116001146105c2576000926105b7575b50506000198260011b9260031b1c19161790555b60ff600283019151167fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00825416179055600381019951998a5167ffffffffffffffff8111610588576103bc8254611053565b601f8111610540575b5060209b601f82116001146104a8579261048c9492826004937fca34bc1ece01e1f6e787e2fcbd4c56766978c283996ee9eb1055109936cf34259e9f6104989c9b9a999760009261049d575b50506000198260011b9260031b1c19161790555b019151151560ff7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0084541691161782555115157fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00ff61ff00835492151560081b169116179055565b604051958695866111a9565b0390a2005b015190503880610411565b9b601f1982169c83600052816000209d60005b8181106105285750837fca34bc1ece01e1f6e787e2fcbd4c56766978c283996ee9eb1055109936cf34259e9f6104989c9b9a99979461048c9997946004976001951061050f575b505050811b019055610425565b015160001960f88460031b161c19169055388080610502565b929e8f83015181556001019e602001926020016104bb565b826000526020600020601f830160051c8101916020841061057e575b601f0160051c01905b81811061057257506103c5565b60008155600101610565565b909150819061055c565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b015190508e80610356565b600085815282812093601f1916905b81811061060d57509084600195949392106105f4575b505050811b01905561036a565b015160001960f88460031b161c191690558e80806105e7565b929360206001819287860151815501950193016105d1565b909150836000526020600020601f840160051c8101916020851061066e575b90601f859493920160051c01905b81811061065f575061033f565b60008155849350600101610652565b9091508190610644565b015190508e806102ff565b600087815282812093601f1916905b8181106106ce57509084600195949392106106b5575b505050811b018355610313565b015160001960f88460031b161c191690558e80806106a8565b92936020600181928786015181550195019301610692565b909150856000526020600020601f840160051c8101916020851061072f575b90601f859493920160051c01905b81811061072057506102e8565b60008155849350600101610713565b9091508190610705565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601660248201527f50726f66696c6520616c726561647920657869737473000000000000000000006044820152fd5b508460005260006020526107af604060002054611053565b1561026f565b346102385760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126102385760043560005260006020526108446040600020610800816110a6565b9060ff610865610812600184016110a6565b928260028201541690610852600461082c600384016110a6565b9201549560405198899860c08a5260c08a0190611168565b9088820360208a0152611168565b9160408701528582036060870152611168565b918181161515608085015260081c16151560a08301520390f35b346102385760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610238576004358060005260006020526108c8604060002054611053565b1515806109bb575b156109375780600052600060205260046040600020016101007fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00ff8254161790557fcf16d2861dfd91df4afddf545e94c3366dabf9ad0655914d7eaaa978600fb9f4600080a2005b60846040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602860248201527f50726f66696c6520616c72656164792064656c65746564206f7220646f65736e60448201527f27742065786973740000000000000000000000000000000000000000000000006064820152fd5b5080600052600060205260ff60046040600020015460081c16156108d0565b34610238576109e836610fa8565b9085600096959396526000602052610a04604060002054611053565b151580610ef3575b15610e6f5760405195610a1e87610f12565b83875260208701858152604088019060ff831682526060890198848a526080810192861515845260a0820192600084528a60005260006020526040600020925180519067ffffffffffffffff8211610588578190610a7c8654611053565b601f8111610e1c575b50602090601f8311600114610db957600092610dae575b50506000198260011b9260031b1c19161783555b518051600184019167ffffffffffffffff8211610588578190610ad38454611053565b601f8111610d5b575b50602090601f8311600114610cf857600092610ced575b50506000198260011b9260031b1c19161790555b60ff600283019151167fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00825416179055600381019951998a5167ffffffffffffffff811161058857610b598254611053565b601f8111610ca5575b5060209b601f8211600114610c27579261048c9492826004937fd330fcb9953d1c5cd0cb179e5de4b7ce936bb9c68efc7b5b74ff9349fabca6bf9e9f6104989c9b9a999760009261049d5750506000198260011b9260031b1c1916179055019151151560ff7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0084541691161782555115157fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00ff61ff00835492151560081b169116179055565b9b601f1982169c83600052816000209d60005b818110610c8d5750837fd330fcb9953d1c5cd0cb179e5de4b7ce936bb9c68efc7b5b74ff9349fabca6bf9e9f6104989c9b9a99979461048c9997946004976001951061050f57505050811b019055610425565b929e8f83015181556001019e60200192602001610c3a565b826000526020600020601f830160051c81019160208410610ce3575b601f0160051c01905b818110610cd75750610b62565b60008155600101610cca565b9091508190610cc1565b015190508e80610af3565b600085815282812093601f1916905b818110610d435750908460019594939210610d2a575b505050811b019055610b07565b015160001960f88460031b161c191690558e8080610d1d565b92936020600181928786015181550195019301610d07565b909150836000526020600020601f840160051c81019160208510610da4575b90601f859493920160051c01905b818110610d955750610adc565b60008155849350600101610d88565b9091508190610d7a565b015190508e80610a9c565b600087815282812093601f1916905b818110610e045750908460019594939210610deb575b505050811b018355610ab0565b015160001960f88460031b161c191690558e8080610dde565b92936020600181928786015181550195019301610dc8565b909150856000526020600020601f840160051c81019160208510610e65575b90601f859493920160051c01905b818110610e565750610a85565b60008155849350600101610e49565b9091508190610e3b565b60846040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602a60248201527f50726f66696c6520646f6573206e6f74206578697374206f722068617320626560448201527f656e2064656c65746564000000000000000000000000000000000000000000006064820152fd5b5084600052600060205260ff60046040600020015460081c1615610a0c565b60c0810190811067ffffffffffffffff82111761058857604052565b90601f601f19910116810190811067ffffffffffffffff82111761058857604052565b81601f820112156102385780359067ffffffffffffffff82116105885760405192610f866020601f19601f8601160185610f2e565b8284526020838301011161023857816000926020809301838601378301015290565b60c07ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc820112610238576004359160243567ffffffffffffffff81116102385782610ff591600401610f51565b9160443567ffffffffffffffff8111610238578161101591600401610f51565b9160643560ff8116810361023857916084359067ffffffffffffffff82116102385761104391600401610f51565b9060a43580151581036102385790565b90600182811c9216801561109c575b602083101461106d57565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b91607f1691611062565b90604051918260008254926110ba84611053565b808452936001811690811561112857506001146110e1575b506110df92500383610f2e565b565b90506000929192526020600020906000915b81831061110c5750509060206110df92820101386110d2565b60209193508060019154838589010152019101909184926110f3565b602093506110df9592507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0091501682840152151560051b820101386110d2565b919082519283825260005b848110611194575050601f19601f8460006020809697860101520116010190565b80602080928401015182828601015201611173565b9360ff6111cb6111df94610844608097959a999a60a08a5260a08a0190611168565b921660408601528482036060860152611168565b93151591015256fea2646970667358221220e734baef00a48587a6925ab9e9c2ba63acf5e71a194aeb1359347e94b1f78f8a64736f6c634300081b0033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
```

In this ABI, we have a set of functions, inputs, outputs, and events captured
from the UserData.sol smart contract. It outlines how external applications can
interact with the contract by providing structured definitions for each callable
function and emitted event.

# UserData Contract ABI Summary

| Events           | Indexed Params     | Non-Indexed Params                                                                           |
| ---------------- | ------------------ | -------------------------------------------------------------------------------------------- |
| `ProfileCreated` | `userId (uint256)` | `name (string)`, `email (string)`, `age (uint8)`, `country (string)`, `isKYCApproved (bool)` |
| `ProfileUpdated` | `userId (uint256)` | `name (string)`, `email (string)`, `age (uint8)`, `country (string)`, `isKYCApproved (bool)` |
| `ProfileDeleted` | `userId (uint256)` | —                                                                                            |

| Functions       | Inputs                                                                                                           | Outputs                                                                                                           |
| --------------- | ---------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------- |
| `createProfile` | `userId (uint256)`, `name (string)`, `email (string)`, `age (uint8)`, `country (string)`, `isKYCApproved (bool)` | —                                                                                                                 |
| `updateProfile` | `userId (uint256)`, `name (string)`, `email (string)`, `age (uint8)`, `country (string)`, `isKYCApproved (bool)` | —                                                                                                                 |
| `deleteProfile` | `userId (uint256)`                                                                                               | —                                                                                                                 |
| `getProfile`    | `userId (uint256)`                                                                                               | Tuple: `{ name (string), email (string), age (uint8), country (string), isKYCApproved (bool), isDeleted (bool) }` |
| `profiles`      | `userId (uint256)`                                                                                               | Tuple: `{ name (string), email (string), age (uint8), country (string), isKYCApproved (bool), isDeleted (bool) }` |

### 3. Add API Portal Middleware to your application

Middleware acts as a bridge between your blockchain network and applications,
providing essential services like data indexing, API access, and event
monitoring. Before adding middleware, ensure you have an application and
blockchain node in place.

## How to Add Middleware

<Tabs items={['SDK CLI', 'Platform UI',  'SDK JS']}>
  <Tab value="Platform UI">
    <Steps>
      ### Navigate to Application
      Navigate to the **application** where you want to add middleware.

      ### Access Middleware Section
      Click **Middleware** in the left navigation, and then click **Add a middleware**. This opens a form.

      ### Configure Middleware
      1. Choose API Portal
      2. Choose a **Middleware name**
      3. Select the **blockchain node**
      4. Configure deployment settings
      5. Click **Confirm**
    </Steps>

  </Tab>

  <Tab value="SDK CLI">
    First ensure you're authenticated:
    ```bash
    settlemint login
    ```

    Create a middleware:
    ```bash
    # Get the list of available middleware types
    settlemint platform create middleware --help

    # Create a middleware
    settlemint platform create middleware <type> <name>

    # Get information about the command and all available options
    settlemint platform create middleware <type> --help
    ```

  </Tab>

  <Tab value="SDK JS">
    ```typescript
    import { createSettleMintClient } from '@settlemint/sdk-js';

    const client = createSettleMintClient({
      accessToken: 'your_access_token',
      instance: 'https://console.settlemint.com'
    });

    // Create middleware
    const createMiddleware = async () => {
      const result = await client.middleware.create({
        applicationUniqueName: "your-app-unique-name",
        name: "my-middleware",
        type: "SHARED",
        interface: "GRAPH",
        blockchainNodeUniqueName: "your-node-unique-name",
        region: "EUROPE",  // Required
        provider: "GKE",   // Required
        size: "SMALL"      // Valid options: "SMALL" | "MEDIUM" | "LARGE"
      });
      console.log('Middleware created:', result);
    };
    ```

    <Callout type="tip">
    Get your access token from the Platform UI under User Settings → API Tokens.
    </Callout>

  </Tab>
</Tabs>

## Manage Middleware

<Tabs items={['SDK CLI', 'Platform UI','SDK JS']}>
  <Tab value="Platform UI">
    Navigate to your middleware and click **Manage middleware** to:
    - View middleware details and status
    - Update configurations
    - Monitor health
    - Access endpoints
  </Tab>

  <Tab value="SDK CLI">
    ```bash
    # List middlewares
    settlemint platform list middlewares --application <app-name>

    # Get middleware details
    settlemint platform read middleware <middleware-name>

    # Delete middleware
    settlemint platform delete middleware <middleware-name>
    ```

  </Tab>

  <Tab value="SDK JS">
    ```typescript
    // List middlewares
    await client.middleware.list("your-app");

    // Get middleware details
    await client.middleware.read("middleware-unique-name");

    // Delete middleware
    await client.middleware.delete("middleware-unique-name");
    ```

  </Tab>
</Tabs>

![Add Smart Contract API Portal](../../../img/building-with-settlemint/add-api-portal.png)

You can upload or copy paste the ABI Please note that if you upload the ABI, the
file name will be picked as the ABI name, so make sure you edit the file name of
the ABI json file before uploading.

![Upload ABI to API Portal](../../../img/building-with-settlemint/upload-abi.png)

In a few minutes we get a REST and GraphQL API layer

![API Portal UI](../../../img/building-with-settlemint/api-portal-ui.png)

To update the ABIs of an existing smart contract portal middleware navigate to
the middleware, go the details and click on the 'Manage Middleware' button on
the top right. Click on the 'Update ABIs' item and a dialog will open. In this
dialog upload the ABI file(s) you saved on your local filesystem in the previous
step.

### 4. How to configure REST API requests in the portal

To interact with your smart contract via the API Portal, follow these steps:

![API Portal call success](../../../img/building-with-settlemint/portal-call-success.png)

#### Get the Base URL

Navigate to the **Connect** tab in the portal middleware to obtain the base API
URL. It will look something like:

```
https://api-portal-affe9.gke-europe.settlemint.com/
```

For exact endpoints, refer to the portal UI. An example endpoint might look like
this:

```
https://api-portal-affe9.gke-europe.settlemint.com/api/user-smart-contract-abi/{address}/create-profile
```

Here, `{address}` should be replaced with the deployed smart contract address on
the blockchain.

> You can find the deployed contract address in the `deployed_addresses.json`
> file located inside the `ignition/deployments` folder.

#### Sample Request Body

Here’s an example JSON body for a smart contract function like `createProfile`:

```json
{
  "from": "",
  "gasLimit": "",
  "gasPrice": "",
  "simulate": true,
  "metadata": {},
  "input": {
    "userId": "",
    "name": "",
    "email": "",
    "age": 0,
    "country": "",
    "isKYCApproved": true
  }
}
```

#### Field Descriptions

- **`from`**: Public key of the wallet that will initiate the transaction.
  Typically, this is the deployer's address. For advanced scenarios, this can be
  a specific user's public address, depending on roles.
- **`gasLimit`**: Use a reasonably high value for zero-gas private networks. For
  others, determine a realistic value through trial and error. You can fine-tune
  this based on actual gas usage from previous transactions.
- **`gasPrice`**: Set to `0` for zero-gas networks, or specify an appropriate
  value for gas-charging private or public networks.
- **`simulate`**: Leave as `true` for a dry run before sending actual
  transactions.
- **`metadata`**: Can be left empty or with default values unless your
  application requires it.
- **`input`**: Include all parameters required by the smart contract function
  you are calling.

#### Authentication

Use your **Application Access Token** as the API key for authentication. You can
generate this token from the **Access Tokens** section in your application
dashboard (left sidebar menu) and will look something like
**sm_aat_fd0fbe61cf102b6c**.

#### Expected Response

If the request is valid, the API will return a: **200 OK** along with the
**transaction hash** in the response body. Else various error codes with
respective messages will be returned.

### 5. How to configure GraphQL API requests in the portal

![API Portal GraphQL](../../../img/building-with-settlemint/api-portal-graphql.png)

### How to Configure a GraphQL Request in the API Portal

To query smart contract data using GraphQL in the SettleMint API Portal,
navigate to the **GraphQL** tab in the portal interface. You will see a visual
GraphQL explorer that allows you to construct and test your queries easily. The
endpoint for GraphQL is provided under the **Connect** tab, typically looking
like:

```
https://api-portal-affe9.gke-europe.settlemint.com/graphql
```

In the explorer, start by selecting the appropriate query object exposed in the
API, such as `UserSmartContractAbi`. You’ll need to provide the `address`
parameter, which corresponds to the deployed smart contract address. This
address ensures that your request is directed to the correct smart contract
instance on-chain.

Once the address is entered, you can choose the function or field you want to
query. For example, selecting the `profiles` field and providing a `uint256` ID
(such as `"101"`) will retrieve the user profile associated with that ID. You
can then pick which fields of the profile you want to fetch—like `name`,
`email`, `age`, `country`, `isKYCApproved`, and `isDeleted`.

After you’ve built your query, hit the play button to execute it. If successful,
the response will appear on the right-hand panel, showing the structured result
returned from the smart contract. In this case, you might get a profile with a
name, email, country, age, and flags indicating whether the profile is deleted
or KYC-approved.

This intuitive interface allows developers to rapidly test GraphQL queries
without needing to write code or leave the portal. This can be used for
debugging, exploring contract data, and integrating smart contract logic into
frontend or backend systems using GraphQL.

<div style={{
  backgroundColor: "#D1E5E8", 
  color: "#000000", 
  padding: "0.5px 10px 10px 10px",
  borderRadius: "10px", 
  fontSize: "18px", 
  fontWeight: "light",
  lineHeight: "1.5",
  textAlign: "left"
}}>
Congratulations.!!

You have succesfully deployed smart contract API portal and have generated APIs
to write data on chain.

From here you can proceed for setting up Graph Middleware for indeing data and
get GraphQL API layer for reading data stored on chain via smart contract
interactions.

</div>

```
Keywords: api portal, smart contract api, settlemint, smart contract abi, rest api, graphql api, middleware, smart contract interface, smart contract endpoints, userdata.sol, deploy abi, abi json, application access token, contract address, api authentication, api portal graphql, api portal rest, contract integration, contract function call, api request structure, simulate smart contract, abi upload, settlemint portal, profile smart contract, create profile api, read profile graphql, middleware interface, user profile contract, web3 api gateway, deployed_addresses.json, ignition deployment, on-chain write api, smart contract events, indexed events, external integration, api explorer, smart contract automation, settlemint middleware, smart contract web api, ethereum abi, settlemint graphql, api token, portal connect tab, abi contract definition, update abi api portal, graphql smart contract query, dapp backend integration, contract read write api, evm smart contract portal, api portal setup, settlemint developer tools
```
